!function(e){"use strict";var t=wp.i18n,a=(t.__,t._x,t._n,t._nx,window.gpls_wcsamm_coming_soon_for_woocommerce_localize_data),n=a.badge_settings;function o(){if(e("."+a.classes_prefix+"-badge-settings-wrapper .preview-img").length){var t=e(".preview-img-badge"),o=e(".edit-badge-icon-radio:checked").length?e(".edit-badge-icon-radio:checked").next().attr("src"):a.badge_settings.badge_icon;t.attr("src",o),t.width(n.badge_width),t.height(n.badge_height),t.css({left:n.badge_left+"px",top:n.badge_top+"px",transform:"rotate( "+n.badge_angle+"deg)",zIndex:100}),t.removeClass("hidden"),function(){var t=e(".preview-img-badge");t.length&&(e(document).on("change input",".edit-badge-icon-radio",(function(t){var a=e(t.target),o=a.val(),i=a.next().attr("src");n.badge_icon=o,e(".preview-img-badge").attr("src",i)})),e(".edit-badge-icon-width").on("change input",(function(a){var o=e(a.target).val();n.badge_width=o,t.width(o)})),e(".edit-badge-icon-height").on("change input",(function(a){var o=e(a.target).val();n.badge_height=o,t.height(o)})),e(".edit-badge-padding-left").on("change input",(function(a){var o=e(a.target).val();n.badge_left=o,t.css({left:n.badge_left+"px"})})),e(".edit-badge-padding-top").on("change input",(function(a){var o=e(a.target).val();n.badge_top=o,t.css({top:n.badge_top+"px"})})),e(".edit-badge-angle").on("change input",(function(a){var o=e(a.target).val();n.badge_angle=o,t.css({transform:"rotate( "+o+"deg)"})})))}()}}function i(){e("#custom-badge-icon-uploader").length&&e("#custom-badge-icon-uploader").dmUploader({url:a.ajaxUrl,extraData:function(e){return{action:a.uploadBadgeIconAction,nonce:a.nonce}},fieldName:"file",dataType:"json",onDragEnter:function(){this.addClass("active")},onDragLeave:function(){this.removeClass("active")},onBeforeUpload:function(t){e(".loader").removeClass("d-none")},onUploadSuccess:function(t,a){!0===a.data.result&&a.data.badges&&e(".badge-icons-wrapper ").html(a.data.badges),s(a.data.message,a.data.status)},onUploadError:function(e,t,a,n){s(t.responseText,"error")},onUploadComplete:function(t){e(".loader").addClass("d-none")},onFileTypeError:function(e){s(a.labels.only_images,"error")},onFileExtError:function(e){s(a.labels.only_images,"error")}})}function s(t,a){var n=e(".badge-upload-message");n.removeAttr("class"),n.addClass("w-100 mt-3 badge-upload-message message"),n.addClass("message-"+a),n.find(".message-body").html(t),setTimeout((function(){e(".badge-upload-message").addClass("d-none")}),3e3)}function r(){e("."+a.classes_prefix+"-color-input").each((function(){var t=e(this);t.wpColorPicker({change:function(t,n){var o=e(t.target),i=o.val(),s=o.data("target"),r=o.data("handle"),d=o.data("css"),c=e(".rotor-group-"+s);if("rotor-group-heading"===r)c.find("."+r+" span").css(d,i);else if("rotor-divider"===r){var l=e("#"+a.prefix+"-settings-styles-css").get(0).sheet;l.insertRule(".rotor-group-"+s+" .rotor:after { "+d+": "+i+" !important; }",l.cssRules.length)}else c.find("."+r).css(d,i),c.find("."+r+" .rotor-painter").css(d,i)},clear:function(){var n=t,o=n.data("target"),i=n.data("handle"),s=n.data("css"),r=e(".rotor-group-"+o);if("rotor-group-heading"===i)r.find("."+i+" span").css(s,"#000");else if("rotor-divider"===i){var d=e("#"+a.prefix+"-settings-styles-css").get(0).sheet;d.insertRule(".rotor-group-"+o+" .rotor:after { "+s+": #000 !important; }",d.cssRules.length)}else r.find("."+i).css(s,value),r.find("."+i+" .rotor-painter").css(s,{color:"#FFF",background:"#000"}[s])}})}))}function d(){e("."+a.classes_prefix+"-color-picker").each((function(){e(this).wpColorPicker()})),l(a.classes_prefix+"-subscribe-title"),l(a.classes_prefix+"-consent-text"),l(a.classes_prefix+"-post-subscribe-text")}function c(){var t=e("."+a.classes_prefix+"-flipper");if(t.length){var n=t.data("datetime"),o={headings:Object.values(a.labels.flipDownHeading)};new FlipDown(n,t,o).start().ifEnded((function(){}))}}function l(t){var a=e("."+t);a.length&&a.each((function(){var t=e(this),a=t.attr("id");wp.editor.remove(a),wp.editor.initialize(a,{tinymce:{height:250,wpautop:!0,theme:"modern",plugins:"charmap, colorpicker, compat3x, directionality, hr, image, lists, media, paste, tabfocus, textcolor, wordpress, wpautoresize, wpdialogs, wpeditimage, wpemoji, wpgallery, wplink, wptextpattern, wpview",tabfocus_elements:": prev ,: next",toolbar1:"bold, hr, link, fontselect, outdent, indent, undo, redo, forecolor, alignjustify, charmap, pastetext fontsizeselect, formatselect, italic, numlist, bullist, alignleft, aligncenter, alignright, link, unlink, fontname, fontsize, fontsize_class, samp, div, h1, h2, h3, h4, h5, h6, p. code, underline, wp_help",setup:function(a){a.on("change",(function(){a.save(),e(".save-variation-changes").attr("disabled",!1),t.closest(".woocommerce_variation").addClass("variation-needs-update")}))},wpeditimage_html5_captions:!0,contextmenu:"link image imagetools spellchecker",paste_webkit_styles:"font-weight font-style color",preview_styles:"background-color font-family font-size font-weight font-style text-decoration text-transform",resize:"vertical",fontsize_formats:"8px 10px 12px 14px 16px 18px 24px 36px 48px 60px",menubar:"file edit insert view format tools help",statusbar:!0,paste_as_text:!0},quicktags:!0,mediaButtons:!0})}))}e(document).ready((function(e){l(a.prefix+"-texteditor"),e(".badge-icons-toggle").on("click",(function(t){t.preventDefault(),e(t.target),e(".badge-icons-wrapper").collapse("toggle")})),o(),i(),r(),c(),d()}))}(jQuery);