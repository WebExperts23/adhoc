(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}!function(e){"use strict";var i=wp.i18n,n=(i.__,i._x,i._n,i._nx,window.gpls_wcsamm_coming_soon_for_woocommerce_localize_data);function a(t){var i=e("."+t);i.length&&i.each((function(){var t=e(this),i=t.attr("id");wp.editor.remove(i),wp.editor.initialize(i,{tinymce:{height:250,wpautop:!0,theme:"modern",plugins:"charmap, colorpicker, compat3x, directionality, hr, image, lists, media, paste, tabfocus, textcolor, wordpress, wpautoresize, wpdialogs, wpeditimage, wpemoji, wpgallery, wplink, wptextpattern, wpview",tabfocus_elements:": prev ,: next",toolbar1:"bold, hr, link, fontselect, outdent, indent, undo, redo, forecolor, alignjustify, charmap, pastetext fontsizeselect, formatselect, italic, numlist, bullist, alignleft, aligncenter, alignright, link, unlink, fontname, fontsize, fontsize_class, samp, div, h1, h2, h3, h4, h5, h6, p. code, underline, wp_help",setup:function(i){i.on("change",(function(){i.save(),e(".save-variation-changes").attr("disabled",!1),t.closest(".woocommerce_variation").addClass("variation-needs-update")}))},wpeditimage_html5_captions:!0,contextmenu:"link image imagetools spellchecker",paste_webkit_styles:"font-weight font-style color",preview_styles:"background-color font-family font-size font-weight font-style text-decoration text-transform",resize:"vertical",fontsize_formats:"8px 10px 12px 14px 16px 18px 24px 36px 48px 60px",menubar:"file edit insert view format tools help",statusbar:!0,paste_as_text:!0},quicktags:!0,mediaButtons:!0})}))}function s(){e("."+n.classes_prefix+"-subscriptions-action-send").on("click",(function(t){var i=this;if(t.preventDefault(),window.confirm(n.prompt_texts.send)){var a=e("#"+n.prefix+"-subscription-emails-metabox"),s=e(this).data("id"),r=a.find(".email-selection").val();e(this).attr("disabled",!0),e("."+n.classes_prefix+"-subscriptions-action-clear").attr("disabled",!0),a.find(".notices").find(".notice").addClass("hidden"),a.find(".notices").find(".sending").removeClass("hidden"),a.find(".last-sent").addClass("hidden"),e.ajax({method:"POST",url:n.ajaxUrl,data:{action:n.send_action,nonce:n.nonce,productID:s,emailProductID:r},success:function(t){var e;null!=t&&null!==(e=t.data)&&void 0!==e&&e.batchKey&&o(t.data.batchKey,r)},error:function(t){},complete:function(){e(i).attr("disabled",!1),e("."+n.classes_prefix+"-subscriptions-action-clear").attr("disabled",!1)}})}})),e("#"+n.prefix+"-subscription-emails-metabox .send-test-email-btn").on("click",(function(i){i.preventDefault();var a,s,o,r=e("#"+n.prefix+"-subscription-emails-metabox"),d=e(this),c=r.find(".test-email"),l=r.find(".email-selection").val(),f=r.find(".test-email-input").val();e(this).attr("disabled",!0),c.find(".spinner").addClass("is-active"),e.ajax({method:"POST",url:n.ajaxUrl,data:(a={action:n.test_email_action,nonce:n.nonce,email:f,emailProductID:l},s="emailProductID",o=l,(s=function(e){var i=function(e,i){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,i);if("object"!==t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===t(i)?i:String(i)}(s))in a?Object.defineProperty(a,s,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[s]=o,a),success:function(t){c.find(".sent").removeClass("hidden"),c.find(".spinner").removeClass("is-active"),setTimeout((function(){c.find(".sent").addClass("hidden")}),2e3)},error:function(t){},complete:function(){d.attr("disabled",!1)}})})),e("."+n.classes_prefix+"-subscriptions-action-export").on("click",(function(t){var i=jQuery("#"+n.prefix+"-subscription-emails-metabox .email-item").not(".hidden").find(".email-name").map((function(){return e.trim(e(this).text())})).get().join("\r\n");return i="email\r\n"+i,i+="\r\n",i="data:text/csv;charset=utf-8,\ufeff"+encodeURIComponent(i),e(this).attr("href",i),!0})),e("."+n.classes_prefix+"-subscriptions-action-clear").on("click",(function(t){if(t.preventDefault(),window.confirm(n.prompt_texts.clear)){var i=e("#"+n.prefix+"-subscription-emails-metabox"),a=e(this).data("id"),s=i.find(".email-selection").val();e(this).attr("disabled",!0),e("."+n.classes_prefix+"-subscriptions-action-send").attr("disabled",!0),i.find(".notices").find(".notice").addClass("hidden"),i.find(".notices").find(".clearing").removeClass("hidden"),e.ajax({method:"POST",url:n.ajaxUrl,data:{action:n.clear_action,nonce:n.nonce,productID:a,emailProductID:s},success:function(t){var e;null!=t&&null!==(e=t.data)&&void 0!==e&&e.emails_list&&i.find(".emails-list").replaceWith(t.data.emails_list)},error:function(t){},complete:function(){!function(){var t=e("#"+n.prefix+"-subscription-emails-metabox");t.find(".notices").find(".clearing").addClass("hidden"),t.find(".notices").find(".sending").addClass("hidden"),t.find(".notices").find(".sent").addClass("hidden"),t.find(".actions").find("button").attr("disabled",!1),t.find(".email-selection").val(0)}()}})}}))}function o(t,i){e.ajax({method:"POST",url:n.ajaxUrl,data:{action:n.trackBackgroundEmailsAction,nonce:n.track_nonce,batchKey:t,productID:i},success:function(a){var s;if(void 0!==(null==a||null===(s=a.data)||void 0===s?void 0:s.status)){if(!a.data.status)return void setTimeout((function(){o(t,i)}),5e3);var r,d=e("#"+n.prefix+"-subscription-emails-metabox");d.find(".notices").find(".notice").addClass("hidden"),d.find(".notices").find(".sending").addClass("hidden"),d.find(".notices").find(".sent").removeClass("hidden"),null!=a&&null!==(r=a.data)&&void 0!==r&&r.last_sent&&d.find('.last-sent[data-product="'+i+'"]').find("strong").text(a.data.last_sent)}},error:function(t){}})}e((function(t){a(n.prefix+"-texteditor"),s(),t("#woocommerce-product-data").on("woocommerce_variations_loaded",(function(t){a(n.prefix+"-variation-texteditor")})),t(document).on("input change","."+n.classes_prefix+"-variation-coming-soon-field",(function(e){t(".save-variation-changes").attr("disabled",!1),t(this).closest(".woocommerce_variation").addClass("variation-needs-update")})),t("#"+n.classes_prefix+"-variation-email-selection").on("change",(function(e){var i=t(this).val();t(".email-item").removeClass("hidden");var a=t('.email-item[data-product_id="'+i+'"]').length,s=t(".email-item").length;0!=i&&t('.email-item[data-product_id!="'+i+'"]').addClass("hidden"),t(".last-sent").addClass("hidden"),t('.last-sent[data-product="'+i+'"]').removeClass("hidden"),0==i?(t("."+n.classes_prefix+"-subscriptions-action-send").attr("disabled","disabled"),t("#"+n.prefix+"-subscription-emails-metabox .send-test-email-btn").attr("disabled","disabled")):(t("."+n.classes_prefix+"-subscriptions-action-send").attr("disabled",!1),t("#"+n.prefix+"-subscription-emails-metabox .send-test-email-btn").attr("disabled",!1)),0==a?(t("."+n.classes_prefix+"-subscriptions-action-send").attr("disabled","disabled"),t("."+n.classes_prefix+"-subscriptions-action-export").attr("disabled","disabled"),t("."+n.classes_prefix+"-subscriptions-action-clear").attr("disabled","disabled")):(t("."+n.classes_prefix+"-subscriptions-action-send").attr("disabled",!1),t("."+n.classes_prefix+"-subscriptions-action-export").attr("disabled",!1),t("."+n.classes_prefix+"-subscriptions-action-clear").attr("disabled",!1)),s&&0==i&&(t("."+n.classes_prefix+"-subscriptions-action-export").attr("disabled",!1),t("."+n.classes_prefix+"-subscriptions-action-clear").attr("disabled",!1))})),t(document).on("click",".badge-icons-toggle",(function(e){e.preventDefault(),t(e.target).closest(".badge-icons-toggler").next().toggle("slow")}))}))}(jQuery)})();